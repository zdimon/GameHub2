## API Викторина

### Создание комнаты

#### Запрос

    url: /api/v1/quiz/new
    
    data:
    
        {
            "category": int
        }    
        
category - тематика викторины
        
### Ответ

Универсальный ответ при создании и входе в комнату с информацией о комнате

        {
            "status": 0
            "room_id": int
            "max_time": int
            "cnt_questions": int
            "question": Dict{
                "id": int
                "q": str
                "image": url
                "audio": url
                "video": url
                "answers": Array[
                    md5, md5 ...
                ]
            }
            "category": Dict{
                "name": str
                "id": int
            }
            "players": Array[
                {
                    "id": int
                    "name": str
                    "account": int
                    "rating": int
                }
            ]
        }
        
max_time - время в сек для подсказок (уточнений)   
cnt_questions - кол-во вопросов       
answers - массив md5 хешей от правильных ответов для проверки на стороне клиента    

## Запрос на проверку ответа.

    {
        "action": "check_me"
        "id": int - question id
        "anwer": str
    }
    
Ответ (всем участникам комнаты)

    {
        "action": "new_answer"
        "user": Dict{} - см выше
        "answer": str
        "is_true": bool
        "time": server time
    }    

## Запросы на всех участников, инициирующиеся на стороне сервера при определенных событиях.

### Получение следующего вопроса

        {
            "status": 0
            "room_id": int
            "is_answered": bool - был ли дан правильный ответ на предыдущий вопрос
            "who_won": int(user_id/Null) - кто дал правильный ответ
            "right_answer": str
            "sound": url - звуковое сопровождение
            "effect": str - название эффекта анимации
            "question": Dict{
                "id": int
                "q": str
                "image": url
                "audio": url
                "video": url
                "answers": Array[
                    md5, md5 ...
                ]
        }



## Закрытие комнаты, раздача призов.

    {
        "action": "close_room"
        "room_id": str
        "message": str
    }


### Вход в комнату

    {
        "game": "название игры", 
        "lobby": "номер лобби на сервере", 
        "question": "текущий вопрос", 
        "correct": "bool",   "players": ["массив информации об участвующих игроках"], "marks": ["массив баллов игроков"]}`

correct - если пользователь ответил возвращает True или False в зависимости от правильности ответа, иначе None

При подключении нового игрока информация о нем добавляется в массив players.

Вопросы, варианты ответов и правильный ответ берем с базы. 

При закрытии лобби, статистику игроков записываем в базу, удаляем лобби с редиса.

При выборе варианта ответа клиент отправляет следующий ответ серверу:

`{"game": "название игры", "lobby": "номер лобби", "answer": "выбранный ответ"}`

При получении ответа от клиента сервер обрабатывает его, проверяет правильность ответа, в случае правильности, сообщает об этом, добавляет его к статистике правильных ответов игрока и отдает новый вопрос, в случае неправильности сообщает об этом и отдает новый вопрос.
